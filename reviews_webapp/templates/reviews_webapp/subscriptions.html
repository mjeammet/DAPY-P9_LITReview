{% extends 'base.html' %}
{% block content %}
<div style="height: 70vh;">
    <h1>Abonnements</h1>
    <h3>Suivre d'autres utilisateurs</h3>
    <p>
        <form method="post"> 
            {{ form.non_field_errors }}
            {% csrf_token %}
            {{ form.username.errors }}
            {{ form.username }}
            <input type="submit"/>
        </form>
    </p>

    <div style="background-color: beige; margin-bottom: 10px;">
        <h3>Abonnements</h3>
        <table style="width: 100%;">
            {% for relationship in subscriptions %}
                <tr>
                <td style="border: 1px solid black">{{ relationship.followed_user.username }}</td>
                <td>
                    <form action="{% url 'subscriptions' %}" method="post">
                        {% csrf_token %}
                        <button value="{{ relationship.id }}" name="unsubscribe_id" method="post">Désabonner</button>
                    </form>
                </td>
            </tr>

            {% endfor %}
        </table>
    </div>

    <div style="background-color: beige; margin-bottom: 10px;">
        <h3>Abonnés</h3>
        <table style="width: 100%;">
            {% for user in subscribers %}
            <tr>
                <td style="border: 1px solid black">{{ user }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>

{% endblock content %}